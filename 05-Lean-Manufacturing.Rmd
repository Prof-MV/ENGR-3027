# Lean Manufacturing
```{r setup-05, include=FALSE}
# include the helpers.R file for pdf output of youtube on pdfs as a clickable link
source("R/helpers.R")
# include the required packages to make sure the page can be built.
source("R/required_packages.R")
```
------------------------------------------------------------------------


## Learning Objectives

By the end of this chapter, you will be able to:

- Define Lean Manufacturing and explain its origins
- Identify and describe the 3 M's of Lean (Muda, Mura, Muri)
- Recognize and eliminate the seven types of waste
- Apply the 5S methodology to workplace organization
- Understand Just-in-Time (JIT) principles and Kanban systems
- Calculate Takt time and apply line balancing concepts
- Implement setup reduction techniques (SMED)

> "Perfection is not attainable. But if we chase perfection, we can catch excellence."
> — Vince Lombardi

------------------------------------------------------------------------

## Introduction to Lean Manufacturing

**Lean Manufacturing** is the systematic elimination of waste. The term can be traced to Jim Womack, Daniel Jones, and Daniel Roos' book *The Machine that Changed the World* (1991), which examined the Toyota Production System.

<details>
<summary>What does "Lean" actually mean?</summary>

The term "Lean" refers to cutting "fat" from production activities — eliminating anything that doesn't add value to the customer. Think of it like a lean athlete: no excess weight, maximum efficiency, peak performance.

</details>

### Definition of Lean

```{r lean-definition, echo=FALSE}
lean_def <- tibble(
  Metric = c("Human effort in factory", "Defects in finished product",
             "Engineering effort", "Factory space for same output",
             "In-process inventories"),
  `Lean Target` = c("Half the hours", "Half the defects",
                    "One-third the hours", "Half the space",
                    "A tenth or less")
)

lean_def %>%
  kable(format = "html", caption = "Lean Manufacturing Targets (Womack, Jones, Roos 1990)") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "bordered"),
                full_width = FALSE, position = "center") %>%
  row_spec(0, bold = TRUE, background = "#2E7D32", color = "white") %>%
  column_spec(1, bold = TRUE, width = "15em") %>%
  column_spec(2, background = "#E8F5E9", width = "12em")
```

------------------------------------------------------------------------

## Evolution of Manufacturing Systems

Manufacturing has evolved through three major paradigms. Understanding this evolution helps us appreciate why Lean emerged as the dominant philosophy.

```{r manufacturing-evolution, echo=FALSE, fig.align="center", fig.cap="Evolution of Manufacturing Systems", fig.width=10, fig.height=6}
# Create timeline visualization
evolution_data <- data.frame(
  Era = c("Craft", "Mass", "Lean"),
  Year = c(1880, 1920, 1970),
  Volume = c(1, 5, 4),
  Variety = c(5, 1, 4),
  Quality = c(5, 2, 5),
  Cost = c(1, 5, 4)
)

# Reshape for plotting
evolution_long <- evolution_data %>%
  pivot_longer(cols = c(Volume, Variety, Quality, Cost),
               names_to = "Metric", values_to = "Score")

ggplot(evolution_long, aes(x = Era, y = Score, fill = Metric)) +
  geom_bar(stat = "identity", position = "dodge", color = "black", width = 0.7) +
  scale_fill_manual(values = c("Volume" = "#3498DB", "Variety" = "#E74C3C",
                                "Quality" = "#2ECC71", "Cost" = "#F39C12")) +
  scale_x_discrete(limits = c("Craft", "Mass", "Lean")) +
  scale_y_continuous(breaks = 1:5, labels = c("Low", "", "Medium", "", "High")) +
  labs(title = "Manufacturing Evolution: Comparing Three Paradigms",
       subtitle = "Score comparison across key metrics (1=Low, 5=High)",
       x = "Manufacturing Era", y = "Performance Level") +
  theme_minimal() +
  theme(
    plot.title = element_text(hjust = 0.5, face = "bold", size = 14),
    plot.subtitle = element_text(hjust = 0.5, size = 10),
    legend.position = "bottom",
    axis.text = element_text(size = 10),
    panel.grid.minor = element_blank()
  )
```

### Comparison of Manufacturing Systems

```{r mfg-comparison-table, echo=FALSE}
mfg_compare <- tibble(
  Characteristic = c("Time Period", "Process", "Workforce", "Components",
                     "Quality", "Cost", "Volume", "Flexibility"),
  `Craft Manufacturing` = c("Late 1800s", "Built on blocks, workers walk around",
                            "Craftsmen with pride", "Hand-crafted, hand-fitted",
                            "Excellent", "Very expensive", "Few produced", "Very high"),
  `Mass Manufacturing` = c("1920s (Ford)", "Assembly line",
                           "Low skilled, simplistic jobs", "Interchangeable parts",
                           "Lower", "Affordable", "Billions - identical", "Very low"),
  `Lean Manufacturing` = c("1970s - Present", "Cells or flexible lines",
                           "Highly skilled, proud of product", "Interchangeable, high variety",
                           "Excellent (mandatory)", "Continuously decreasing", "High volume, high variety", "High")
)

mfg_compare %>%
  kable(format = "html", caption = "Evolution of Manufacturing Systems") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "bordered", "responsive"),
                full_width = TRUE, position = "center", font_size = 12) %>%
  row_spec(0, bold = TRUE, background = "#34495E", color = "white") %>%
  column_spec(1, bold = TRUE, background = "#ECF0F1", width = "10em")
```

<details>
<summary>Discussion: Why did Mass Manufacturing dominate for so long?</summary>

Mass manufacturing dominated because:

1. **Economies of scale** - Higher volume = lower unit cost
2. **Predictable demand** - Post-war boom created stable markets
3. **Limited competition** - Few global competitors
4. **Consumer acceptance** - "Any color as long as it's black" (Henry Ford)

**What changed?**
- Global competition (especially from Japan)
- Customers demanded variety and quality
- Product lifecycles shortened
- Technology enabled flexibility

</details>

------------------------------------------------------------------------

## The Toyota Production System (TPS)

The most influential lean manufacturing model is the **Toyota Production System (TPS)**, developed by Taiichi Ohno and Shigeo Shingo at Toyota.

### Historical Context

```{r tps-timeline, echo=FALSE, fig.align="center", fig.cap="Toyota's Journey to Lean Excellence", fig.width=10, fig.height=4}
timeline_data <- data.frame(
  year = c(1949, 1950, 1960, 1970, 1980, 1990),
  event = c("Toyota near\nbankruptcy", "Ohno begins\nJIT development",
            "Kanban system\nimplemented", "TPS refined\nand documented",
            "TPS studied\nby West", "\"Lean\" term\ncoined"),
  y = rep(0, 6)
)

ggplot(timeline_data, aes(x = year, y = y)) +
  geom_hline(yintercept = 0, color = "#2C3E50", size = 2) +
  geom_point(size = 8, color = "#E74C3C") +
  geom_text(aes(label = year), vjust = -2.5, fontface = "bold", size = 4) +
  geom_text(aes(label = event), vjust = 2.5, size = 3, lineheight = 0.8) +
  theme_void() +
  labs(title = "The Evolution of Toyota Production System") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 14)) +
  ylim(-1.5, 1.5) +
  xlim(1945, 1995)
```

**In 1949**, Toyota was on the brink of bankruptcy. Ford's car production was at least **8 times more efficient** than Toyota's.

> **Kiichiro Toyoda's Challenge:** "To achieve the same rate of production as the United States in three years."

**Taiichi Ohno** accepted this challenge. Inspired by American supermarkets, he developed the Just-in-Time method.

### Two Pillars of TPS

```{r tps-pillars, echo=FALSE, fig.align="center", fig.cap="The Two Pillars of Toyota Production System", fig.width=8, fig.height=5}
# House of Toyota visualization
ggplot() +
  # Roof
  annotate("polygon", x = c(0, 4, 8), y = c(4.5, 6, 4.5), fill = "#E74C3C", color = "black") +
  annotate("text", x = 4, y = 5, label = "CUSTOMER FOCUS\nHighest Quality, Lowest Cost, Shortest Lead Time",
           fontface = "bold", size = 3.5, color = "white", lineheight = 0.8) +
  # Pillars
  annotate("rect", xmin = 0.5, xmax = 3.5, ymin = 1.5, ymax = 4.5, fill = "#3498DB", color = "black") +
  annotate("text", x = 2, y = 3, label = "JUST-IN-TIME\n\nRight part\nRight amount\nRight time",
           fontface = "bold", size = 3.5, color = "white", lineheight = 0.9) +
  annotate("rect", xmin = 4.5, xmax = 7.5, ymin = 1.5, ymax = 4.5, fill = "#2ECC71", color = "black") +
  annotate("text", x = 6, y = 3, label = "JIDOKA\n(Built-in Quality)\n\nStop and fix\nproblems\nimmediately",
           fontface = "bold", size = 3.5, color = "white", lineheight = 0.9) +
  # Foundation
  annotate("rect", xmin = 0, xmax = 8, ymin = 0, ymax = 1.5, fill = "#F39C12", color = "black") +
  annotate("text", x = 4, y = 0.75,
           label = "FOUNDATION: Standardized Work • Kaizen • Stability • Heijunka",
           fontface = "bold", size = 3.5, color = "white") +
  theme_void() +
  labs(title = "The House of Toyota Production System") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 14)) +
  xlim(-0.5, 8.5) + ylim(-0.5, 6.5)
```

**1. Just-in-Time (JIT):** Produce only what is needed, when it is needed, in the amount needed.

**2. Jidoka (Built-in Quality):** Automation with a human touch — stop production immediately when a defect is detected.

```{=html}
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%;">
  <iframe
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
    src="https://www.youtube.com/embed/F5vtCRFRAK0"
    title="Lean Manufacturing - A Pursuit of Perfection"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    allowfullscreen>
  </iframe>
</div>
```

------------------------------------------------------------------------

## The 3 M's of Lean

Lean manufacturing focuses on eliminating three types of inefficiency, known as the **3 M's**:

```{r three-ms, echo=FALSE, fig.align="center", fig.cap="The 3 M's of Lean Manufacturing", fig.width=9, fig.height=5}
# Create 3 M's visualization
ms_data <- data.frame(
  M = c("MUDA", "MURA", "MURI"),
  English = c("Waste", "Inconsistency", "Overburden"),
  x = c(1, 2, 3),
  y = c(1, 1, 1),
  color = c("#E74C3C", "#F39C12", "#9B59B6")
)

ggplot(ms_data, aes(x = x, y = y)) +
  geom_point(aes(color = M), size = 40, alpha = 0.8) +
  geom_text(aes(label = M), fontface = "bold", size = 6, color = "white", vjust = -0.3) +
  geom_text(aes(label = English), size = 4, color = "white", vjust = 1.2) +
  scale_color_manual(values = c("MUDA" = "#E74C3C", "MURA" = "#F39C12", "MURI" = "#9B59B6")) +
  theme_void() +
  theme(legend.position = "none",
        plot.title = element_text(hjust = 0.5, face = "bold", size = 14)) +
  labs(title = "The 3 M's of Lean") +
  xlim(0.3, 3.7) + ylim(0.5, 1.5)
```

```{r three-ms-table, echo=FALSE}
three_ms <- tibble(
  `Japanese` = c("**Muda** (無駄)", "**Mura** (斑)", "**Muri** (無理)"),
  `English` = c("Waste", "Inconsistency/Unevenness", "Overburden/Unreasonableness"),
  `Description` = c("Activities that consume resources without adding value",
                    "Variation and lack of uniformity in processes",
                    "Overburdening people or equipment beyond capacity"),
  `Example` = c("Excess inventory, waiting, defects",
                "Uneven production schedules, variable quality",
                "Unrealistic deadlines, overworked employees")
)

three_ms %>%
  kable(format = "html", caption = "The 3 M's Explained") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "bordered"),
                full_width = TRUE, position = "center") %>%
  row_spec(0, bold = TRUE, background = "#8E44AD", color = "white") %>%
  column_spec(1, width = "10em")
```

------------------------------------------------------------------------

## The Seven Types of Waste (MUDA)

**Shigeo Shingo** identified seven categories of waste common to manufacturing. These are activities that add cost without adding value.

> "Waste is everything that is not absolutely essential."
> — Hiroyuki Hirano

```{r seven-wastes-viz, echo=FALSE, fig.align="center", fig.cap="The Seven Types of Waste (TIMWOOD)", fig.width=10, fig.height=7}
# Create waste visualization
wastes <- data.frame(
  waste = c("Transport", "Inventory", "Motion", "Waiting",
            "Overproduction", "Over-processing", "Defects"),
  letter = c("T", "I", "M", "W", "O", "O", "D"),
  impact = c(3, 5, 2, 4, 5, 3, 4),
  x = c(1, 2, 3, 4, 5, 6, 7),
  description = c("Moving\nmaterials", "Excess\nstock", "Unnecessary\nmovement",
                  "Idle\ntime", "Making\ntoo much", "Extra\nwork", "Rework/\nscrap")
)

ggplot(wastes, aes(x = reorder(waste, -impact), y = impact)) +
  geom_bar(stat = "identity", fill = "#E74C3C", color = "black", width = 0.7) +
  geom_text(aes(label = letter), y = 0.3, size = 8, fontface = "bold", color = "white") +
  geom_text(aes(label = description, y = impact + 0.3), size = 3, vjust = 0, lineheight = 0.8) +
  scale_y_continuous(limits = c(0, 6), breaks = 1:5,
                     labels = c("Low", "", "Medium", "", "High")) +
  labs(title = "The Seven Wastes: TIMWOOD",
       subtitle = "Ranked by typical impact on manufacturing efficiency",
       x = "Type of Waste", y = "Typical Impact") +
  theme_minimal() +
  theme(
    plot.title = element_text(hjust = 0.5, face = "bold", size = 14),
    plot.subtitle = element_text(hjust = 0.5, size = 10),
    axis.text.x = element_text(angle = 45, hjust = 1, size = 10, face = "bold"),
    panel.grid.minor = element_blank()
  )
```

### Detailed Breakdown of the Seven Wastes

```{r seven-wastes-table, echo=FALSE}
wastes_detail <- tibble(
  `#` = 1:7,
  `Waste Type` = c("**Overproduction**", "**Inventory**", "**Waiting**",
                   "**Transportation**", "**Over-processing**", "**Motion**", "**Defects**"),
  `Description` = c("Producing more than needed, earlier than needed",
                    "Excess raw materials, WIP, or finished goods",
                    "Idle time waiting for materials, information, or equipment",
                    "Unnecessary movement of materials between processes",
                    "Doing more work than the customer requires",
                    "Unnecessary movement of people",
                    "Products that don't meet specifications"),
  `Examples` = c("Building to forecast, large batch sizes",
                 "Safety stock, buffer inventory, obsolete stock",
                 "Machine downtime, waiting for approvals",
                 "Long distances between operations, poor layout",
                 "Tighter tolerances than needed, redundant inspections",
                 "Reaching, bending, walking to get tools",
                 "Scrap, rework, warranty claims"),
  `Solution` = c("Pull systems, smaller batches",
                 "JIT delivery, kanban systems",
                 "TPM, better scheduling",
                 "Cellular layout, co-location",
                 "Value engineering, standardization",
                 "5S, ergonomic workstations",
                 "Poka-yoke, root cause analysis")
)

wastes_detail %>%
  kable(format = "html", caption = "The Seven Wastes: Detailed Analysis") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "bordered", "responsive"),
                full_width = TRUE, position = "center", font_size = 11) %>%
  row_spec(0, bold = TRUE, background = "#C0392B", color = "white") %>%
  row_spec(1:2, background = "#FADBD8") %>%
  column_spec(1, width = "3em", bold = TRUE)
```

<details>
<summary>Memory Aid: TIMWOOD</summary>

Use **TIMWOOD** to remember the seven wastes:

- **T**ransportation
- **I**nventory
- **M**otion
- **W**aiting
- **O**verproduction
- **O**ver-processing
- **D**efects

Some people also use **DOWNTIME** (adding "Non-utilized talent" as an 8th waste).

</details>

<details>
<summary>Interactive Exercise: Identify the Waste</summary>

**Scenario 1:** A worker walks 50 feet to get a tool, uses it for 30 seconds, then walks back.

**Answer:** This is **Motion** waste. The solution would be to place tools at the point of use (5S).

**Scenario 2:** A machine produces 1000 parts, but only 800 are needed this week.

**Answer:** This is **Overproduction** waste. The solution would be to implement pull production based on actual demand.

**Scenario 3:** Parts sit in a queue for 3 days before being processed at the next station.

**Answer:** This is both **Inventory** and **Waiting** waste. The solution would be to balance the line and implement one-piece flow.

</details>

------------------------------------------------------------------------

## The 5S Methodology

**5S** is a workplace organization methodology that creates a clean, efficient, and safe working environment.

```{r five-s-viz, echo=FALSE, fig.align="center", fig.cap="The 5S Methodology", fig.width=10, fig.height=6}
# Create 5S circular visualization
five_s <- data.frame(
  step = 1:5,
  japanese = c("Seiri", "Seiton", "Seiso", "Seiketsu", "Shitsuke"),
  english = c("Sort", "Set in Order", "Shine", "Standardize", "Sustain"),
  action = c("Remove\nunnecessary", "A place for\neverything", "Clean\nregularly",
             "Make it\nstandard", "Maintain\ndiscipline"),
  angle = seq(90, -198, length.out = 5),
  color = c("#E74C3C", "#F39C12", "#2ECC71", "#3498DB", "#9B59B6")
)

# Calculate positions on circle
five_s$x <- 2 * cos(five_s$angle * pi / 180)
five_s$y <- 2 * sin(five_s$angle * pi / 180)

ggplot(five_s) +
  # Center circle
  annotate("point", x = 0, y = 0, size = 25, color = "#2C3E50") +
  annotate("text", x = 0, y = 0, label = "5S", size = 10, color = "white", fontface = "bold") +
  # Outer circles
  geom_point(aes(x = x, y = y, color = japanese), size = 22, alpha = 0.9) +
  geom_text(aes(x = x, y = y + 0.15, label = paste0(step, "S")),
            size = 5, fontface = "bold", color = "white") +
  geom_text(aes(x = x, y = y - 0.15, label = japanese),
            size = 3.5, color = "white") +
  # Labels outside
  geom_text(aes(x = x * 1.6, y = y * 1.6, label = english),
            size = 4, fontface = "bold") +
  geom_text(aes(x = x * 1.9, y = y * 1.9, label = action),
            size = 3, lineheight = 0.8) +
  scale_color_manual(values = c("Seiri" = "#E74C3C", "Seiton" = "#F39C12",
                                "Seiso" = "#2ECC71", "Seiketsu" = "#3498DB",
                                "Shitsuke" = "#9B59B6")) +
  theme_void() +
  theme(legend.position = "none",
        plot.title = element_text(hjust = 0.5, face = "bold", size = 14)) +
  labs(title = "The 5S Methodology for Workplace Organization") +
  coord_fixed() +
  xlim(-4.5, 4.5) + ylim(-4.5, 4.5)
```

```{r five-s-table, echo=FALSE}
five_s_detail <- tibble(
  `Step` = c("1S", "2S", "3S", "4S", "5S"),
  `Japanese` = c("**Seiri**", "**Seiton**", "**Seiso**", "**Seiketsu**", "**Shitsuke**"),
  `English` = c("Sort", "Set in Order", "Shine", "Standardize", "Sustain"),
  `Action` = c("Remove unnecessary items from the workplace",
               "Organize items so they are easy to find and use",
               "Clean the workplace regularly",
               "Create standards for maintaining 1S-3S",
               "Build discipline to maintain standards"),
  `Key Question` = c("Do we need this?", "Where does this belong?",
                     "Is everything clean?", "How do we keep it this way?",
                     "Are we following our standards?")
)

five_s_detail %>%
  kable(format = "html", caption = "The 5S Steps Explained") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "bordered"),
                full_width = TRUE, position = "center") %>%
  row_spec(0, bold = TRUE, background = "#27AE60", color = "white") %>%
  row_spec(1, background = "#FADBD8") %>%
  row_spec(2, background = "#FEF9E7") %>%
  row_spec(3, background = "#D5F5E3") %>%
  row_spec(4, background = "#D6EAF8") %>%
  row_spec(5, background = "#E8DAEF")
```

### Visual Factory

> "The ability to understand the status of a production area in **5 minutes or less** by simple observation without use of computers or speaking to anyone."

A well-implemented 5S creates a **visual factory** where problems are immediately apparent.

------------------------------------------------------------------------

## Just-in-Time (JIT) Production

### The JIT Philosophy

> "Deliver the right material, in the exact quantity, with perfect quality, in the right place, just before it is needed."
> — Ohno and Shingo

```{r jit-concept, echo=FALSE, fig.align="center", fig.cap="Just-in-Time: The Right Everything", fig.width=9, fig.height=5}
jit_elements <- data.frame(
  element = c("Right Part", "Right Quantity", "Right Quality",
              "Right Place", "Right Time"),
  x = c(1, 2, 3, 4, 5),
  y = rep(1, 5),
  icon = c("Part", "Qty", "Quality", "Place", "Time")
)

ggplot(jit_elements, aes(x = x, y = y)) +
  # Arrows connecting elements
  geom_segment(aes(x = x + 0.3, xend = x + 0.7, y = y, yend = y),
               data = jit_elements[1:4,],
               arrow = arrow(length = unit(0.2, "cm")), color = "#2C3E50", size = 1.5) +
  # Circles
  geom_point(size = 20, color = "#3498DB") +
  geom_text(aes(label = element), size = 3, fontface = "bold", color = "white",
            lineheight = 0.8) +
  # Final output
  annotate("point", x = 6.5, y = 1, size = 25, color = "#2ECC71") +
  annotate("text", x = 6.5, y = 1, label = "CUSTOMER\nSATISFACTION",
           size = 3.5, fontface = "bold", color = "white", lineheight = 0.9) +
  geom_segment(aes(x = 5.4, xend = 5.9, y = 1, yend = 1),
               arrow = arrow(length = unit(0.3, "cm")), color = "#2C3E50", size = 2) +
  theme_void() +
  labs(title = "Just-in-Time: Delivering Value to the Customer") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 14)) +
  xlim(0.3, 7.2)
```

### Push vs. Pull Systems

```{r push-pull-viz, echo=FALSE, fig.align="center", fig.cap="Push vs. Pull Production Systems", fig.width=10, fig.height=6}
# Create comparison visualization
par(mfrow = c(2, 1))

# Push system data
push_data <- data.frame(
  station = c("Forecast", "Station 1", "Station 2", "Station 3", "Customer"),
  x = 1:5,
  y = rep(2, 5),
  inventory = c(0, 30, 50, 40, 10)
)

# Pull system data
pull_data <- data.frame(
  station = c("Supplier", "Station 1", "Station 2", "Station 3", "Customer"),
  x = 1:5,
  y = rep(1, 5),
  inventory = c(5, 5, 5, 5, 0)
)

# Combine for ggplot
push_data$system <- "PUSH System (Traditional)"
pull_data$system <- "PULL System (Lean/JIT)"
combined <- rbind(push_data, pull_data)
combined$y <- ifelse(combined$system == "PUSH System (Traditional)", 2, 1)

ggplot(combined, aes(x = x, y = y)) +
  # Station boxes
  geom_tile(fill = "#3498DB", width = 0.8, height = 0.3, color = "black") +
  geom_text(aes(label = station), size = 3, fontface = "bold", color = "white") +
  # Inventory indicators
  geom_point(aes(y = y + 0.25, size = inventory), color = "#E74C3C", alpha = 0.7) +
  geom_text(aes(y = y + 0.25, label = inventory), size = 2.5, color = "white", fontface = "bold") +
  # Arrows
  geom_segment(data = combined[combined$x < 5,],
               aes(x = x + 0.45, xend = x + 0.55, y = y, yend = y),
               arrow = arrow(length = unit(0.15, "cm")), color = "#2C3E50") +
  # Labels
  annotate("text", x = 0.3, y = 2, label = "PUSH", hjust = 1, fontface = "bold", size = 5, color = "#E74C3C") +
  annotate("text", x = 0.3, y = 1, label = "PULL", hjust = 1, fontface = "bold", size = 5, color = "#2ECC71") +
  # Information flow arrows
  annotate("segment", x = 1, xend = 5, y = 2.5, yend = 2.5,
           arrow = arrow(length = unit(0.2, "cm")), color = "#F39C12", size = 1) +
  annotate("text", x = 3, y = 2.6, label = "Information Flow →", color = "#F39C12", size = 3) +
  annotate("segment", x = 5, xend = 1, y = 0.5, yend = 0.5,
           arrow = arrow(length = unit(0.2, "cm")), color = "#2ECC71", size = 1) +
  annotate("text", x = 3, y = 0.4, label = "← Signal/Kanban", color = "#2ECC71", size = 3) +
  scale_size_continuous(range = c(3, 15), guide = "none") +
  theme_void() +
  labs(title = "Push vs. Pull: A Visual Comparison",
       subtitle = "Circle size represents inventory level at each station") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 14),
        plot.subtitle = element_text(hjust = 0.5, size = 10)) +
  xlim(-0.2, 5.5) + ylim(0.2, 2.8)
```

```{r push-pull-table, echo=FALSE}
push_pull <- tibble(
  Aspect = c("Production trigger", "Information flow", "Inventory levels",
             "Flexibility", "Problem visibility", "Customer responsiveness"),
  `Push System` = c("Forecast/Schedule", "Forward (upstream to downstream)",
                    "High (buffers at each station)", "Low",
                    "Problems hidden by inventory", "Slow"),
  `Pull System` = c("Actual demand/Kanban signal", "Backward (downstream to upstream)",
                    "Low (minimal buffers)", "High",
                    "Problems immediately visible", "Fast")
)

push_pull %>%
  kable(format = "html", caption = "Push vs. Pull System Comparison") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "bordered"),
                full_width = TRUE, position = "center") %>%
  row_spec(0, bold = TRUE, background = "#2C3E50", color = "white") %>%
  column_spec(1, bold = TRUE, width = "12em") %>%
  column_spec(2, background = "#FADBD8") %>%
  column_spec(3, background = "#D5F5E3")
```

### Kanban System

**Kanban** (看板) is Japanese for "signboard" or "billboard." It's a scheduling system for lean and JIT production.

```{r kanban-example, echo=FALSE, fig.align="center", fig.cap="Example Kanban Card", fig.width=7, fig.height=4}
ggplot() +
  # Card border
  annotate("rect", xmin = 0, xmax = 7, ymin = 0, ymax = 4,
           fill = "white", color = "black", size = 2) +
  # Header
  annotate("rect", xmin = 0, xmax = 7, ymin = 3.2, ymax = 4,
           fill = "#3498DB", color = "black") +
  annotate("text", x = 3.5, y = 3.6, label = "PRODUCTION KANBAN",
           fontface = "bold", size = 5, color = "white") +
  # Content
  annotate("text", x = 0.3, y = 2.8, label = "Part Number:", hjust = 0, size = 3.5) +
  annotate("text", x = 3, y = 2.8, label = "3278784", hjust = 0, size = 3.5, fontface = "bold") +
  annotate("text", x = 0.3, y = 2.4, label = "Part Name:", hjust = 0, size = 3.5) +
  annotate("text", x = 3, y = 2.4, label = "Securing Bracket", hjust = 0, size = 3.5, fontface = "bold") +
  annotate("text", x = 0.3, y = 2.0, label = "From Process:", hjust = 0, size = 3.5) +
  annotate("text", x = 3, y = 2.0, label = "CNC Turning (CNC-6)", hjust = 0, size = 3.5, fontface = "bold") +
  annotate("text", x = 0.3, y = 1.6, label = "To Process:", hjust = 0, size = 3.5) +
  annotate("text", x = 3, y = 1.6, label = "CNC Machining (CNC-M7)", hjust = 0, size = 3.5, fontface = "bold") +
  annotate("text", x = 0.3, y = 1.0, label = "Container Qty:", hjust = 0, size = 3.5) +
  annotate("text", x = 2.5, y = 1.0, label = "12", hjust = 0, size = 4, fontface = "bold") +
  annotate("text", x = 4, y = 1.0, label = "Container Type:", hjust = 0, size = 3.5) +
  annotate("text", x = 6, y = 1.0, label = "A1", hjust = 0, size = 4, fontface = "bold") +
  # Barcode placeholder
  annotate("rect", xmin = 5, xmax = 6.8, ymin = 1.8, ymax = 2.8, fill = "#ECF0F1", color = "black") +
  annotate("text", x = 5.9, y = 2.3, label = "|||||||||||", size = 5) +
  theme_void() +
  labs(title = "Sample Production Kanban Card") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 12))
```

------------------------------------------------------------------------

## Key Time Metrics

Understanding time metrics is essential for lean manufacturing analysis and improvement.

### Definitions

```{r time-metrics-viz, echo=FALSE, fig.align="center", fig.cap="Relationship Between Time Metrics", fig.width=10, fig.height=5}
ggplot() +
  # Lead Time bar (longest)
  annotate("rect", xmin = 0, xmax = 10, ymin = 2.5, ymax = 3, fill = "#E74C3C", alpha = 0.8) +
  annotate("text", x = 5, y = 2.75, label = "LEAD TIME (Order to Delivery)", color = "white", fontface = "bold") +
  # Throughput Time bar
  annotate("rect", xmin = 1, xmax = 9, ymin = 1.5, ymax = 2, fill = "#F39C12", alpha = 0.8) +
  annotate("text", x = 5, y = 1.75, label = "THROUGHPUT TIME (Start to Finish)", color = "white", fontface = "bold") +
  # Cycle Times
  annotate("rect", xmin = 1.5, xmax = 3, ymin = 0.5, ymax = 1, fill = "#3498DB", alpha = 0.8) +
  annotate("rect", xmin = 3.5, xmax = 5, ymin = 0.5, ymax = 1, fill = "#3498DB", alpha = 0.8) +
  annotate("rect", xmin = 5.5, xmax = 7, ymin = 0.5, ymax = 1, fill = "#3498DB", alpha = 0.8) +
  annotate("rect", xmin = 7.5, xmax = 8.5, ymin = 0.5, ymax = 1, fill = "#3498DB", alpha = 0.8) +
  annotate("text", x = 2.25, y = 0.75, label = "Op 1", color = "white", size = 3) +
  annotate("text", x = 4.25, y = 0.75, label = "Op 2", color = "white", size = 3) +
  annotate("text", x = 6.25, y = 0.75, label = "Op 3", color = "white", size = 3) +
  annotate("text", x = 8, y = 0.75, label = "Op 4", color = "white", size = 3) +
  annotate("text", x = 5, y = 0.2, label = "CYCLE TIMES (Individual Operations)", fontface = "bold") +
  # Takt Time reference line
  annotate("segment", x = 0, xend = 10, y = 3.5, yend = 3.5,
           linetype = "dashed", color = "#2ECC71", size = 1.5) +
  annotate("text", x = 5, y = 3.7, label = "TAKT TIME (Customer Demand Rate)",
           color = "#2ECC71", fontface = "bold") +
  theme_void() +
  labs(title = "Understanding Time Metrics in Manufacturing") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 14)) +
  ylim(-0.2, 4)
```

### Formulas and Calculations

**Takt Time** — The pace of production to meet customer demand:

$$\text{Takt Time} = \frac{\text{Available Production Time}}{\text{Customer Demand}}$$

**Cycle Time** — Time to complete one unit at a workstation:

$$\text{Cycle Time} = \frac{\text{Net Operating Time}}{\text{Units Produced}}$$

**Throughput Time** — Total time from start to finish:

$$\text{Throughput Time} = \text{Processing} + \text{Inspection} + \text{Queue} + \text{Move Time}$$

### Interactive Example: Calculating Takt Time

```{r takt-calculation, echo=TRUE}
# Given data
available_time_per_day <- 8 * 60  # 8 hours = 480 minutes
breaks_and_meetings <- 60         # 60 minutes for breaks/meetings
customer_demand <- 240            # 240 units per day

# Calculate net available time
net_available_time <- available_time_per_day - breaks_and_meetings
cat("Net Available Time:", net_available_time, "minutes/day\n")

# Calculate Takt Time
takt_time <- net_available_time / customer_demand
cat("Takt Time:", takt_time, "minutes per unit\n")
cat("Takt Time:", takt_time * 60, "seconds per unit\n")

# Interpretation
cat("\n--- Interpretation ---\n")
cat("To meet customer demand, we must produce 1 unit every",
    takt_time, "minutes (", takt_time * 60, "seconds).\n")
```

<details>
<summary>Practice Problem: Calculate Your Takt Time</summary>

**Given:**
- Shift length: 10 hours
- Two 15-minute breaks and one 30-minute lunch
- Customer requires 300 units per shift

**Calculate:**
1. Net available production time
2. Takt time in minutes
3. Takt time in seconds

**Solution:**
```
Net time = (10 × 60) - (15 + 15 + 30) = 600 - 60 = 540 minutes
Takt time = 540 / 300 = 1.8 minutes = 108 seconds per unit
```

</details>

------------------------------------------------------------------------

## Setup Reduction (SMED)

**SMED** (Single Minute Exchange of Dies) is a methodology developed by Shigeo Shingo to dramatically reduce changeover time.

### The SMED Concept

```{r smed-viz, echo=FALSE, fig.align="center", fig.cap="SMED: Internal vs External Setup", fig.width=10, fig.height=5}
# Before SMED
before <- data.frame(
  activity = c("Get tools", "Remove old die", "Install new die", "Adjust settings", "Get materials", "First article"),
  time = c(15, 30, 45, 20, 10, 10),
  type = c("External", "Internal", "Internal", "Internal", "External", "Internal"),
  x_start = c(0, 15, 45, 90, 110, 120),
  scenario = "BEFORE SMED"
)
before$x_end <- before$x_start + before$time

# After SMED
after <- data.frame(
  activity = c("Install new die", "Adjust settings", "First article"),
  time = c(30, 15, 5),
  type = c("Internal", "Internal", "Internal"),
  x_start = c(0, 30, 45),
  scenario = "AFTER SMED"
)
after$x_end <- after$x_start + after$time

ggplot() +
  # Before SMED bars
  geom_rect(data = before, aes(xmin = x_start, xmax = x_end, ymin = 1.6, ymax = 2,
                                fill = type), color = "black") +
  geom_text(data = before, aes(x = (x_start + x_end)/2, y = 1.8, label = activity),
            size = 2.5, angle = 0) +
  # After SMED bars
  geom_rect(data = after, aes(xmin = x_start, xmax = x_end, ymin = 0.6, ymax = 1,
                               fill = type), color = "black") +
  geom_text(data = after, aes(x = (x_start + x_end)/2, y = 0.8, label = activity),
            size = 2.5, angle = 0) +
  # Labels
  annotate("text", x = -10, y = 1.8, label = "BEFORE\n(130 min)", hjust = 1, fontface = "bold", size = 3) +
  annotate("text", x = -10, y = 0.8, label = "AFTER\n(50 min)", hjust = 1, fontface = "bold", size = 3) +
  # External activities done in parallel
  annotate("rect", xmin = -50, xmax = 0, ymin = 0.4, ymax = 0.6, fill = "#3498DB", alpha = 0.5) +
  annotate("text", x = -25, y = 0.5, label = "External done\nduring production", size = 2.5, color = "white") +
  scale_fill_manual(values = c("Internal" = "#E74C3C", "External" = "#3498DB"),
                    name = "Setup Type") +
  theme_void() +
  labs(title = "SMED: From 130 Minutes to 50 Minutes",
       subtitle = "External activities moved to run during production") +
  theme(plot.title = element_text(hjust = 0.5, face = "bold", size = 14),
        plot.subtitle = element_text(hjust = 0.5, size = 10),
        legend.position = "bottom") +
  xlim(-55, 135)
```

### SMED Methodology

```{r smed-steps, echo=FALSE}
smed_steps <- tibble(
  Step = c("1", "2", "3", "4"),
  Action = c("**Document current process**",
             "**Separate internal and external**",
             "**Convert internal to external**",
             "**Streamline all operations**"),
  Description = c("Video the entire changeover, identify all steps",
                  "Internal = machine must be stopped; External = can be done while running",
                  "Find ways to perform 'internal' tasks while machine is running",
                  "Reduce time for remaining internal tasks through better methods"),
  Example = c("Time each step of die change",
              "Getting tools = external; Removing die = internal",
              "Pre-stage next die, pre-heat tools",
              "Use quick-release clamps instead of bolts")
)

smed_steps %>%
  kable(format = "html", caption = "The Four Steps of SMED") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "bordered"),
                full_width = TRUE, position = "center") %>%
  row_spec(0, bold = TRUE, background = "#8E44AD", color = "white") %>%
  column_spec(1, width = "5em", bold = TRUE)
```

<details>
<summary>Case Study: Press Setup Reduction</summary>

**Problem:** Presses were idle more than 50% of the time due to setup.
- Average production run: 1-2 days
- Setup time: 1-2 days

**Root Cause Analysis:**
- Using standard bolt fasteners with open-end wrenches
- No pre-staging of tools or dies
- Sequential operations that could be parallel

**Solutions Implemented:**

| Change | Time Saved |
|--------|------------|
| Socket sets + power tools | 10% |
| Quick-release clamps | 50% |
| Pre-staging materials | 20% |
| Parallel operations | 20% |

**Result:** Setup time reduced from 1-2 days to 4-6 hours, with a target of under 1 hour.

</details>

------------------------------------------------------------------------

## Kaizen: Continuous Improvement

**Kaizen** (改善) means "change for the better" — the philosophy of continuous, incremental improvement.

### Kaizen Principles

```{r kaizen-cycle, echo=FALSE, fig.align="center", fig.cap="The Kaizen Continuous Improvement Cycle", fig.width=8, fig.height=8}
# Create PDCA cycle
pdca <- data.frame(
  step = c("PLAN", "DO", "CHECK", "ACT"),
  angle = c(45, 315, 225, 135),
  color = c("#3498DB", "#2ECC71", "#F39C12", "#E74C3C"),
  description = c("Identify\nopportunity", "Test\nsolution", "Measure\nresults", "Standardize\nor adjust")
)

pdca$x <- 2 * cos(pdca$angle * pi / 180)
pdca$y <- 2 * sin(pdca$angle * pi / 180)

ggplot(pdca) +
  # Center
  annotate("point", x = 0, y = 0, size = 30, color = "#2C3E50") +
  annotate("text", x = 0, y = 0, label = "KAIZEN\n改善", size = 6, color = "white",
           fontface = "bold", lineheight = 0.8) +
  # Outer circles
  geom_point(aes(x = x, y = y, color = step), size = 25, alpha = 0.9) +
  geom_text(aes(x = x, y = y + 0.1, label = step), size = 5, fontface = "bold", color = "white") +
  geom_text(aes(x = x, y = y - 0.25, label = description), size = 3, color = "white", lineheight = 0.8) +
  # Arrows
  annotate("curve", x = 1.5, xend = 1.5, y = 2, yend = -0.5,
           arrow = arrow(length = unit(0.3, "cm")), curvature = 0.5, color = "#2C3E50", size = 1) +
  annotate("curve", x = 1.5, xend = -1.5, y = -2, yend = -1.5,
           arrow = arrow(length = unit(0.3, "cm")), curvature = 0.5, color = "#2C3E50", size = 1) +
  annotate("curve", x = -1.5, xend = -1.5, y = -2, yend = 0.5,
           arrow = arrow(length = unit(0.3, "cm")), curvature = 0.5, color = "#2C3E50", size = 1) +
  annotate("curve", x = -1.5, xend = 1.5, y = 2, yend = 1.5,
           arrow = arrow(length = unit(0.3, "cm")), curvature = 0.5, color = "#2C3E50", size = 1) +
  scale_color_manual(values = c("PLAN" = "#3498DB", "DO" = "#2ECC71",
                                "CHECK" = "#F39C12", "ACT" = "#E74C3C")) +
  theme_void() +
  theme(legend.position = "none",
        plot.title = element_text(hjust = 0.5, face = "bold", size = 14)) +
  labs(title = "Plan-Do-Check-Act: The Engine of Kaizen") +
  coord_fixed() +
  xlim(-3.5, 3.5) + ylim(-3.5, 3.5)
```

### Key Kaizen Concepts

- **Everyone participates** — from CEO to frontline workers
- **Small, incremental changes** — not major overhauls
- **Focus on process** — blame the process, not the person
- **Data-driven decisions** — measure before and after
- **Standardize improvements** — lock in gains

------------------------------------------------------------------------

## Value Stream Mapping (VSM)

**Value Stream Mapping** is a lean tool for analyzing the flow of materials and information required to bring a product to the customer.

```{=html}
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%;">
  <iframe
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
    src="https://www.youtube.com/embed/GQSq54OcgCA"
    title="Value Stream Mapping"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    allowfullscreen>
  </iframe>
</div>
```

### VSM Symbols

```{r vsm-metrics, echo=FALSE}
vsm_metrics <- tibble(
  Metric = c("**Process Time (PT)**", "**Lead Time (LT)**", "**Changeover Time (C/O)**",
             "**Uptime**", "**Takt Time**", "**WIP Inventory**"),
  Description = c("Time to actually process one unit",
                  "Total time from raw material to finished good",
                  "Time to switch between products",
                  "Percentage of time equipment is available",
                  "Required pace to meet demand",
                  "Units waiting between processes"),
  `Typical Location` = c("In process box", "Timeline at bottom",
                         "In process box", "In process box",
                         "Noted on map", "Triangle symbol between processes")
)

vsm_metrics %>%
  kable(format = "html", caption = "Key Metrics in Value Stream Maps") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "bordered"),
                full_width = TRUE, position = "center") %>%
  row_spec(0, bold = TRUE, background = "#16A085", color = "white")
```

------------------------------------------------------------------------

## Summary

```{r summary-table-lean, echo=FALSE}
summary_data <- tibble(
  Concept = c("**Lean Manufacturing**", "**3 M's**", "**7 Wastes**", "**5S**",
              "**JIT**", "**Kanban**", "**SMED**", "**Kaizen**"),
  Definition = c("Systematic elimination of waste",
                 "Muda (waste), Mura (inconsistency), Muri (overburden)",
                 "TIMWOOD: Transport, Inventory, Motion, Waiting, Overproduction, Over-processing, Defects",
                 "Sort, Set in Order, Shine, Standardize, Sustain",
                 "Right part, right quantity, right quality, right place, right time",
                 "Visual signal system for pull production",
                 "Single Minute Exchange of Dies - rapid changeover",
                 "Continuous incremental improvement"),
  `Key Benefit` = c("Reduced cost, improved quality",
                    "Framework for identifying improvement opportunities",
                    "Systematic waste identification",
                    "Organized, efficient workplace",
                    "Minimal inventory, fast response",
                    "Controlled WIP, smooth flow",
                    "Flexibility, reduced batch sizes",
                    "Engaged workforce, sustained improvement")
)

summary_data %>%
  kable(format = "html", caption = "Lean Manufacturing: Key Concepts Summary") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "bordered"),
                full_width = TRUE, position = "center") %>%
  row_spec(0, bold = TRUE, background = "#2C3E50", color = "white") %>%
  column_spec(1, width = "12em")
```

------------------------------------------------------------------------

## Review Questions

<details>
<summary>Question 1: What are the seven types of waste, and which is often considered the most impactful?</summary>

The seven types of waste (TIMWOOD) are:
1. **T**ransportation
2. **I**nventory
3. **M**otion
4. **W**aiting
5. **O**verproduction
6. **O**ver-processing
7. **D**efects

**Inventory** is often considered the most impactful because it hides other problems, ties up capital, and can become obsolete.

</details>

<details>
<summary>Question 2: Explain the difference between Push and Pull production systems.</summary>

**Push System:**
- Production based on forecasts
- Materials pushed through the system
- Results in high inventory
- Problems hidden by buffer stock

**Pull System:**
- Production triggered by actual demand
- Materials pulled by downstream operations
- Minimal inventory
- Problems immediately visible

</details>

<details>
<summary>Question 3: Calculate the Takt time for a facility with 450 minutes of available time and demand of 150 units.</summary>

$$\text{Takt Time} = \frac{450 \text{ minutes}}{150 \text{ units}} = 3 \text{ minutes per unit}$$

This means we need to produce one unit every 3 minutes (180 seconds) to meet customer demand.

</details>

<details>
<summary>Question 4: What is the difference between internal and external setup in SMED?</summary>

**Internal Setup:** Activities that can ONLY be performed when the machine is stopped (e.g., physically removing the old die).

**External Setup:** Activities that CAN be performed while the machine is still running (e.g., getting tools, pre-staging the next die, preparing materials).

The key to SMED is converting as many internal activities to external as possible.

</details>

------------------------------------------------------------------------

## References

- Womack, J., Jones, D., & Roos, D. (1990). *The Machine that Changed the World*.
- Ohno, T. (1988). *Toyota Production System: Beyond Large-Scale Production*.
- Shingo, S. (1985). *A Revolution in Manufacturing: The SMED System*.
- Liker, J. (2004). *The Toyota Way*.
- Wang, H.P., Chang, T.C., & Wysk, R.A. (2007). *Computer Aided Manufacturing*, Chapter 18.
